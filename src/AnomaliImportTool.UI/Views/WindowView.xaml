<mah:MetroWindow x:Class="AnomaliImportTool.UI.Views.WindowView"
                  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                  xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                  xmlns:iconPacks="http://metro.mahapps.com/winfx/xaml/iconpacks"
                  xmlns:local="clr-namespace:AnomaliImportTool.UI.Views"
                  xmlns:mah="clr-namespace:MahApps.Metro.Controls;assembly=MahApps.Metro"
                  xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                  Title="Anomali Import Tool"
                  Width="1200"
                  Height="800"
                  MinWidth="800"
                  MinHeight="600"
                  WindowStartupLocation="CenterScreen"
                  mc:Ignorable="d">
    
    <mah:MetroWindow.Resources>
        <Style x:Key="NavigationButton" TargetType="Button" BasedOn="{StaticResource MahApps.Styles.Button.Flat}">
            <Setter Property="Height" Value="48"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="HorizontalContentAlignment" Value="Left"/>
            <Setter Property="Margin" Value="0,2"/>
            <Setter Property="Padding" Value="16,0"/>
        </Style>
    </mah:MetroWindow.Resources>

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="250" MinWidth="200"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- Navigation Panel -->
        <Border Grid.Column="0" 
                Background="{DynamicResource MahApps.Brushes.Accent2}"
                BorderThickness="0,0,1,0"
                BorderBrush="{DynamicResource MahApps.Brushes.Border.NonActive}">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- App Header -->
                <StackPanel Grid.Row="0" Margin="16,16">
                    <TextBlock Text="ANOMALI" 
                               FontSize="24" 
                               FontWeight="Bold"
                               Foreground="{DynamicResource MahApps.Brushes.AccentBase}"/>
                    <TextBlock Text="Import Tool" 
                               FontSize="16" 
                               Margin="0,4,0,0"
                               Foreground="{DynamicResource MahApps.Brushes.Text}"/>
                </StackPanel>

                <!-- Navigation Menu -->
                <StackPanel Grid.Row="1" Margin="8,16">
                    <Button x:Name="btnFileSelection" 
                            Style="{StaticResource NavigationButton}"
                            Click="NavigateToFileSelection_Click">
                        <StackPanel Orientation="Horizontal">
                            <iconPacks:PackIconMaterial Kind="FileDocument" 
                                                       Width="20" 
                                                       Height="20" 
                                                       Margin="0,0,12,0"/>
                            <TextBlock Text="File Selection" VerticalAlignment="Center"/>
                        </StackPanel>
                    </Button>

                    <Button x:Name="btnProcessing" 
                            Style="{StaticResource NavigationButton}"
                            Click="NavigateToProcessing_Click"
                            IsEnabled="False">
                        <StackPanel Orientation="Horizontal">
                            <iconPacks:PackIconMaterial Kind="ProgressClock" 
                                                       Width="20" 
                                                       Height="20" 
                                                       Margin="0,0,12,0"/>
                            <TextBlock Text="Processing" VerticalAlignment="Center"/>
                        </StackPanel>
                    </Button>

                    <Button x:Name="btnResults" 
                            Style="{StaticResource NavigationButton}"
                            Click="NavigateToResults_Click"
                            IsEnabled="False">
                        <StackPanel Orientation="Horizontal">
                            <iconPacks:PackIconMaterial Kind="CheckCircle" 
                                                       Width="20" 
                                                       Height="20" 
                                                       Margin="0,0,12,0"/>
                            <TextBlock Text="Results" VerticalAlignment="Center"/>
                        </StackPanel>
                    </Button>

                    <Separator Margin="0,16"/>

                    <Button x:Name="btnSettings" 
                            Style="{StaticResource NavigationButton}"
                            Click="NavigateToSettings_Click">
                        <StackPanel Orientation="Horizontal">
                            <iconPacks:PackIconMaterial Kind="Settings" 
                                                       Width="20" 
                                                       Height="20" 
                                                       Margin="0,0,12,0"/>
                            <TextBlock Text="Settings" VerticalAlignment="Center"/>
                        </StackPanel>
                    </Button>
                </StackPanel>

                <!-- Footer -->
                <StackPanel Grid.Row="2" Margin="16" VerticalAlignment="Bottom">
                    <TextBlock Text="Version 1.0.0" 
                               FontSize="12"
                               Foreground="{DynamicResource MahApps.Brushes.Gray5}"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Main Content Area -->
        <Grid Grid.Column="1">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Top Bar -->
            <Border Grid.Row="0" 
                    Background="{DynamicResource MahApps.Brushes.Window.Background}"
                    BorderThickness="0,0,0,1"
                    BorderBrush="{DynamicResource MahApps.Brushes.Border.NonActive}"
                    Height="60">
                <Grid Margin="24,0">
                    <TextBlock x:Name="txtPageTitle" 
                               Text="File Selection" 
                               FontSize="20" 
                               VerticalAlignment="Center"
                               FontWeight="SemiBold"/>
                    
                    <!-- Connection Status -->
                    <StackPanel Orientation="Horizontal" 
                                HorizontalAlignment="Right" 
                                VerticalAlignment="Center">
                        <Ellipse x:Name="connectionIndicator" 
                                Width="10" 
                                Height="10" 
                                Fill="{DynamicResource MahApps.Brushes.Gray5}"
                                Margin="0,0,8,0"/>
                        <TextBlock x:Name="txtConnectionStatus" 
                                  Text="Not Connected" 
                                  FontSize="12"
                                  Foreground="{DynamicResource MahApps.Brushes.Gray3}"/>
                    </StackPanel>
                </Grid>
            </Border>

            <!-- Content Frame -->
            <Frame x:Name="contentFrame" 
                   Grid.Row="1"
                   NavigationUIVisibility="Hidden"
                   Margin="0"/>

            <!-- Status Bar -->
            <StatusBar Grid.Row="2" 
                       Background="{DynamicResource MahApps.Brushes.Accent4}"
                       Height="32">
                <StatusBarItem>
                    <TextBlock x:Name="txtStatus" Text="Ready" Margin="8,0"/>
                </StatusBarItem>
                <StatusBarItem HorizontalAlignment="Right">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock x:Name="txtProgress" 
                                  Text="" 
                                  Margin="0,0,16,0"
                                  Visibility="Collapsed"/>
                        <ProgressBar x:Name="progressBar" 
                                    Width="200" 
                                    Height="16"
                                    Visibility="Collapsed"
                                    Margin="0,0,8,0"/>
                    </StackPanel>
                </StatusBarItem>
            </StatusBar>
        </Grid>
    </Grid>
</mah:MetroWindow>
